# Welcome to Serverless!
#
# Happy Coding!

service: serverless-go

provider:
  name: aws
  runtime: go1.x
  stage: ${opt:stage, self:custom.defaultStage}
  region: ap-northeast-1
# 権限設定
#  iamRoleStatements:
#    - Effect: Allow
#      Action:
#        - dynamodb:*
#      Resource: "arn:aws:dynamodb:${self:provider.region}:*:table/*"
# you can define service wide environment variables here
#  environment:
#    variable1: value1

custom:
  defaultStage: dev
#  table:
#    dev:
#      dataTable: dev-datatable
#    prod:
#      dataTable: prod-datatable

package:
 exclude:
   - ./**
 include:
   - ./bin/**

functions:
  hello:
    handler: bin/func
    events:
      - http:
          path: func
          method: get
          # cognito認証を実施する場合、対象cognitoのarnを指定
          #authorizer:
          #  arn: arn:aws:cognito-idp:ap-northeast-1:982976011432:userpool/ap-northeast-1_xerpEI3kg
    #environment:
    #  DATATABLE: ${self:custom.table.${self:provider.stage}.dataTable}

# dynamoDB Create処理
#resources:
#  Resources:
#    DynamoDataTable:
#      Type: 'AWS::DynamoDB::Table'
#      #DeletionPolicy: Retain
#      Properties:
#        AttributeDefinitions:
#          -
#            AttributeName: id
#            AttributeType: S
#        KeySchema:
#          -
#            AttributeName: id
#            KeyType: HASH
#        ProvisionedThroughput:
#          ReadCapacityUnits: 1
#          WriteCapacityUnits: 1
#        TableName: ${self:custom.table.${self:provider.stage}.dataTable}
